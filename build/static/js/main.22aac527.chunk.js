(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{42:function(e,t,n){"use strict";n.r(t);var r=n(17),a=n.n(r),c=n(1),u=n.n(c),s=n(4),o=n(5),i=n(6),l=n(3),d=n(7),b=n.n(d),p="/api/persons";function j(){return(j=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get(p);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post(p,t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.put("".concat(p,"/").concat(t.id),t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.delete("".concat(p,"/").concat(t.id));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O={getAll:function(){return j.apply(this,arguments)},addNew:function(e){return f.apply(this,arguments)},update:function(e){return h.apply(this,arguments)},deletePerson:function(e){return x.apply(this,arguments)}},m=n(0),v=function(e){var t=e.filterString,n=e.handler;return Object(m.jsxs)(m.Fragment,{children:["Filter names: ",Object(m.jsx)("input",{value:t,onChange:n})]})},w=function(e){var t=e.submitHandler,n=e.name,r=e.nameHandler,a=e.number,c=e.numberHandler;return Object(m.jsxs)(m.Fragment,{children:["Add new person:",Object(m.jsxs)("form",{onSubmit:t,children:[Object(m.jsxs)("div",{children:["name: ",Object(m.jsx)("input",{value:n,onChange:r})]}),Object(m.jsxs)("div",{children:["Phone number: ",Object(m.jsx)("input",{value:a,onChange:c})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",disabled:!(n&&a),children:"add"})})]})]})},g=function(e){var t=e.persons,n=e.filterString,r=e.handleDelete,a=t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).sort((function(e,t){return e.name.toLowerCase()>t.name.toLowerCase()?1:-1}));return Object(m.jsx)("ul",{children:a.map((function(e){return Object(m.jsx)(y,{person:e,handleDelete:r},e.id)}))})},y=function(e){var t=e.person,n=e.handleDelete;return Object(m.jsxs)("li",{children:[t.name," ",t.number," ",Object(m.jsx)(k,{person:t,handleDelete:function(){return n(t)}})]})},k=function(e){var t=e.handleDelete;return Object(m.jsx)("button",{onClick:t,children:"Delete"})},S=function(e){var t=e.text,n=e.color;if(!t)return null;var r={fontSize:30,color:n,backgroundColor:"snow",border:5,borderStyle:"solid",borderRadius:10,padding:14,marginBottom:16,textAlign:"center"};return Object(m.jsx)("div",{style:r,children:t})},C=function(){var e=Object(l.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(l.useState)(""),c=Object(i.a)(a,2),d=c[0],b=c[1],p=Object(l.useState)(""),j=Object(i.a)(p,2),f=j[0],h=j[1],x=Object(l.useState)(""),y=Object(i.a)(x,2),k=y[0],C=y[1],D=Object(l.useState)({text:null,color:"snow"}),A=Object(i.a)(D,2),H=A[0],L=A[1];function P(e,t){L({text:e,color:t}),setTimeout((function(){return L(Object(o.a)(Object(o.a)({},H),{},{text:null}))}),3e3)}Object(l.useEffect)((function(){return O.getAll().then(r)}),[]);var F=function(){var e=Object(s.a)(u.a.mark((function e(t){var a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a={name:d,number:f},!1,e.next=7;break;case 7:return e.next=9,O.addNew(a);case 9:c=e.sent,P("Added ".concat(c.name),"green"),r(n.concat(c));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Confirm deletion of ".concat(t.name,"?"))){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,O.deletePerson(t);case 6:P("Deleted ".concat(t.name),"green"),r(n.filter((function(e){return e.id!==t.id}))),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(3),console.log("Tried to delete following person, but they didn't exist in the database",t),O.getAll().then(r),P("Oops, ".concat(t.name," doesn't exist in the database. Refetching data."),"red");case 15:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),B=function(e){return function(t){return e(t.target.value)}},E={submitHandler:F,name:d,nameHandler:B(b),number:f,numberHandler:B(h)};return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Phonebook"}),Object(m.jsx)(S,Object(o.a)({},H)),Object(m.jsx)(w,Object(o.a)({},E)),Object(m.jsx)("h2",{children:"Numbers"}),Object(m.jsx)(v,{filterString:k,handler:B(C)}),Object(m.jsx)(g,{persons:n,filterString:k,handleDelete:N})]})};a.a.render(Object(m.jsx)(C,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.22aac527.chunk.js.map